<challenge_card>
    <a href="{{ challenge_url }}" class="challenge-card block no-underline text-inherit">
        <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-xl overflow-hidden flex {% if is_Public %}border-4 border-blue-300{% endif %}">
            <div class="p-4 flex items-center justify-center flex-shrink-0">
                <div class="w-48 h-48 bg-gray-200 rounded-md flex items-center justify-center overflow-hidden">
                    <img class="w-full h-full object-cover rounded-md"
                        src="https://media.istockphoto.com/id/1317323736/ko/%EC%82%AC%EC%A7%84/%EB%82%98%EB%AC%B4-%EB%B0%A9%ED%96%A5%EC%9C%BC%EB%A1%9C-%ED%95%98%EB%8A%98%EB%A1%9C-%EB%B0%94%EB%9D%BC%EB%B3%B4%EB%8A%94-%EA%B2%BD%EC%B9%98.jpg?s=612x612&w=0&k=20&c=0xTghmMTXJ5ITCZ-LKTABbaPIK_1kWNf0FSFl_GL_7I="
                        alt="Card Image">
                </div>
            </div>

            <div class="flex-1 py-6 pr-6 pl-6 flex flex-col justify-center">
                <div class="mb-4">
                    <h3 class="text-xl font-semibold text-gray-800">
                        {{ challenge_name }}
                    </h3>
                </div>

                <div>
                    <div class="text-sm text-gray-600 mb-1">진행도</div>
                    <div class="flex items-center gap-4">
                        <div class="grid grid-cols-10 grid-rows-2 gap-px w-64">
                            <div class="w-6 h-6 bg-green-400 border border-gray-300"></div>
                            <div class="w-6 h-6 bg-green-400 border border-gray-300"></div>
                            <div class="w-6 h-6 bg-green-400 border border-gray-300"></div>
                            <div class="w-6 h-6 bg-green-400 border border-gray-300"></div>
                            <div class="w-6 h-6 bg-green-300 border border-gray-300"></div>
                            <div class="w-6 h-6 bg-green-300 border border-gray-300"></div>
                            <div class="w-6 h-6 bg-green-300 border border-gray-300"></div>
                            <div class="w-6 h-6 bg-green-300 border border-gray-300"></div>
                            <div class="w-6 h-6 bg-green-300 border border-gray-300"></div>
                            <div class="w-6 h-6 bg-green-300 border border-gray-300"></div>
                            <div class="w-6 h-6 bg-white border border-gray-300"></div>
                            <div class="w-6 h-6 bg-white border border-gray-300"></div>
                            <div class="w-6 h-6 bg-white border border-gray-300"></div>
                            <div class="w-6 h-6 bg-white border border-gray-300"></div>
                            <div class="w-6 h-6 bg-white border border-gray-300"></div>
                            <div class="w-6 h-6 bg-white border border-gray-300"></div>
                            <div class="w-6 h-6 bg-white border border-gray-300"></div>
                            <div class="w-6 h-6 bg-white border border-gray-300"></div>
                            <div class="w-6 h-6 bg-white border border-gray-300"></div>
                            <div class="w-6 h-6 bg-white border border-gray-300"></div>
                        </div>

                        <div class="relative w-16 h-16 flex-shrink-0">
                            <svg class="w-full h-full transform -rotate-90" viewBox="0 0 100 100">
                                <circle cx="50" cy="50" r="45" fill="none" stroke="#E5E7EB"
                                    class="stroke-current text-gray-200" stroke-width="10"></circle>
                                <circle id="progressBar" cx="50" cy="50" r="45" fill="none" stroke="#10B981"
                                    class="stroke-current text-green-500" stroke-width="10" stroke-linecap="round"
                                    stroke-dasharray="282.74" {# 2 * PI * 45 (원의 둘레) #} stroke-dashoffset="141.37" {#
                                    예시: 50% 진행 (10/20) #}></circle>
                            </svg>
                            <div
                                class="absolute inset-0 flex items-center justify-center text-sm font-semibold text-gray-700">
                                10/20
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="p-6 flex flex-col justify-between items-end flex-shrink-0">
                <button class="text-gray-500 hover:text-red-500 transition-colors duration-200 focus:outline-none">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                            d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z"
                            clip-rule="evenodd" />
                    </svg>
                </button>

                <div class="text-sm text-gray-600 mt-2 text-right">
                    <span class="font-medium">시작:</span> 2024.01.01<br>
                    <span class="font-medium">종료:</span> 2024.12.31
                </div>
            </div>

        </div>
    </a>

    <script>
        function updateCircularProgressBar(current, total, elementId = 'progressBar', textElementSelector = '.absolute.inset-0.flex') {
            const progressBar = document.getElementById(elementId);
            if (!progressBar) return;

            const percentage = total > 0 ? (current / total) : 0;
            const circumference = 2 * Math.PI * 45; // r=45 (SVG circle의 r 값과 동일해야 함)
            const offset = circumference * (1 - percentage);

            progressBar.style.strokeDashoffset = offset;

            const textElement = progressBar.parentElement.querySelector(textElementSelector);
            if (textElement) {
                textElement.textContent = `${current}/${total}`;
            }
        }

        $(document).ready(function () {
            updateCircularProgressBar(10, 20); // 초기값 설정 (50% 채워짐)
        });
    </script>
</challenge_card>